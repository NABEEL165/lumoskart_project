<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }} | Lumoskart</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f9fafb;
            --accent: #10b981;
            --light: #ffffff;
            --dark: #1f2937;
            --gray: #6b7280;
            --light-gray: #f3f4f6;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--secondary);
            color: var(--dark);
            line-height: 1.6;
            padding-top: 0;
        }

        /* Navbar */
        .navbar {
            background: var(--light);
            box-shadow: var(--shadow);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar-brand img {
            height: 40px;
        }

        .nav-item {
            margin: 0 0.5rem;
        }

        .nav-link {
            color: var(--dark) !important;
            font-weight: 500;
            padding: 0.5rem 1rem !important;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background-color: var(--light-gray);
            color: var(--primary) !important;
        }

        .btn-account {
            background-color: var(--primary);
            color: white !important;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-account:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Product Container */
        .product-container {
            background: var(--light);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            margin: 2rem auto;
            max-width: 1200px;
        }

        .product-header {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            padding: 2rem;
        }

        .product-image-section {
            flex: 1;
            min-width: 300px;
        }

        .product-image {
            width: 100%;
            height: 400px;
            border-radius: 12px;
            overflow: hidden;
            background: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
            position: relative;
        }

        .product-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .product-image:hover img {
            transform: scale(1.05);
        }

        .image-thumbnails {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .thumbnail {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .thumbnail:hover, .thumbnail.active {
            border-color: var(--primary);
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .product-info-section {
            flex: 1;
            min-width: 300px;
        }

        .product-category {
            color: var(--primary);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.875rem;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .product-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .stars {
            color: #fbbf24;
        }

        .rating-text {
            color: var(--gray);
            font-size: 0.875rem;
        }

        .product-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 1rem 0;
        }

        .product-original-price {
            font-size: 1.25rem;
            color: var(--gray);
            text-decoration: line-through;
            margin-left: 0.5rem;
        }

        .product-description {
            color: var(--gray);
            margin: 1.5rem 0;
            line-height: 1.8;
        }

        .product-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .meta-item {
            background: var(--light-gray);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .influencer-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin: 1.5rem 0;
            padding: 1rem;
            background: var(--light-gray);
            border-radius: 12px;
        }

        .influencer-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .influencer-details h4 {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
        }

        .influencer-details p {
            margin: 0;
            font-size: 0.875rem;
            color: var(--gray);
        }

        .product-actions {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: var(--primary);
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline-primary {
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }

        .btn-outline-primary:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Reviews Section */
        .reviews-section {
            background: var(--light);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            padding: 2rem;
            margin: 0 auto 2rem;
            max-width: 1200px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--dark);
        }

        .review-item {
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border);
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .reviewer-name {
            font-weight: 600;
            color: var(--dark);
        }

        .review-date {
            color: var(--gray);
            font-size: 0.875rem;
        }

        .review-content {
            margin: 1rem 0;
            color: var(--gray);
        }

        .no-reviews {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 1rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h5 {
            color: white;
            margin-bottom: 1rem;
        }

        .footer-links {
            list-style: none;
            padding: 0;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-links a {
            color: #d1d5db;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #374151;
            color: #9ca3af;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .product-header {
                flex-direction: column;
                padding: 1.5rem;
            }

            .product-title {
                font-size: 1.5rem;
            }

            .product-price {
                font-size: 1.5rem;
            }

            .product-actions {
                flex-direction: column;
            }

            .btn-primary, .btn-outline-primary {
                width: 100%;
            }

            .product-image {
                height: 300px;
            }

            .nav-item {
                margin: 0 0.25rem;
            }

            .nav-link {
                padding: 0.5rem !important;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .product-image {
                height: 250px;
            }

            .product-title {
                font-size: 1.25rem;
            }

            .section-title {
                font-size: 1.25rem;
            }

            .product-actions {
                gap: 0.5rem;
            }

            .btn-primary, .btn-outline-primary {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }
        }
            .navbar-brand:hover .brand-text {
            color: #ffffff;
            text-shadow: 0 0 10px rgba(0, 199, 247, 0.5);
            /* Teal glow using your primary color */
            transition: all 0.3s ease;
        }

        .navbar-brand:hover .logo-img {
            transform: scale(1.05);
            transition: all 0.3s ease;
        }

        /* Mobile Navbar Optimization */
        @media (max-width: 991px) {
            .navbar-container {
                display: flex !important;
                flex-wrap: nowrap !important;
                justify-content: space-between !important;
                align-items: center !important;
                width: 100% !important;
                padding: 0 5px !important;
            }

            .navbar-brand {
                margin-right: 0 !important;
                gap: 10px !important;
                flex-shrink: 0;
                display: flex !important;
                align-items: center !important;
            }

            .logo-img {
                max-height: 40px !important;
                width: auto !important;
                flex-shrink: 0;
            }

            .brand-text {
                font-size: 1.4rem !important;
                display: inline-block !important;
                color: #ffffff !important;
                background: linear-gradient(135deg, #ffffff 0%, #00c7f7 100%) !important;
                -webkit-background-clip: text !important;
                background-clip: text !important;
                -webkit-text-fill-color: transparent !important;
                white-space: nowrap !important;
            }

            .mobile-view {
                display: flex !important;
                align-items: center !important;
                gap: 5px !important;
                flex-shrink: 0;
            }

            .desktop-view {
                display: none !important;
            }

            .btn-open-app {
                padding: 4px 12px !important;
                font-size: 0.85rem !important;
                height: fit-content;
            }
        }


        /* Custom Toggler Icon and Buttons */
        .navbar-toggler {
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            padding: 5px 8px !important;
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
            width: 1.25em !important;
            height: 1.25em !important;
        }

        .mobile-view .btn-outline-light {
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff !important;
        }

        .mobile-view .btn-outline-light:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Influencer Swiper Styles */
        .influencers-swiper {
            width: 100%;
            padding: 20px 0;
        }

        .influencers-swiper .swiper-slide {
            display: flex;
            justify-content: center;
        }

        .influencers-swiper .swiper-wrapper {
            padding: 10px 0;
        }


        .swiper-pagination.influencers-pagination {
            bottom: 0 !important;
        }

        .swiper-pagination-bullet {
            background: #00c7f7;
            opacity: 0.5;
        }

        .swiper-pagination-bullet-active {
            opacity: 1;
            background: #00c7f7;
        }

        /* Logo + Brand Text Container */
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            /* Space between logo and text */
            text-decoration: none !important;
        }

        /* Logo Image */
        .navbar-brand img,
        .logo-img {
            height: 50px;
            width: auto;
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Hover effect on logo */
        .navbar-brand:hover img,
        .navbar-brand:hover .logo-img {
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 0 15px rgba(0, 199, 247, 0.4);
            /* Teal glow */
        }

        /* Brand Text - "LumosKart" */
        .brand-text {
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: -0.5px;
            color: #ffffff;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #00c7f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: ;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
.navbar-brand:hover .brand-text {
    text-shadow: 0 0 14px rgba(0, 199, 247, 0.7);
}

        /* Hover glow on text */
        /*.navbar-brand:hover .brand-text {*/
        /*    text-shadow:*/
        /*        0 2px 10px rgba(0, 0, 0, 0.3),*/
        /*        0 0 15px rgba(0, 199, 247, 0.6);*/
            /* Stronger teal glow */
        /*}*/

        /* Optional: Slight lift on whole brand on hover */
        /*.navbar-brand:hover {*/
        /*    transform: translateY(-2px);*/
        /*}*/
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <!--<div class="container">-->
        <!--    <a class="navbar-brand" href="{% url 'home' %}">-->
        <!--        <img src="{% static 'accounts/images/lumoskart-logo.png' %}" alt="Lumoskart Logo" height="40">-->
        <!--    </a>-->
 <div class="container-fluid navbar-container">
                <a href="{% url 'home' %}" class="navbar-brand d-flex align-items-center gap-3">
                    <img src="{% static 'accounts/images/WhatsApp Image 2026-01-07 at 6.45.12 PM.jpeg' %}"
                        alt="LumosKart Logo" class="logo-img" style="max-height: 50px; width: auto;">
                    <span class="brand-text">LumosKart</span>
                </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}"><i class="fas fa-home me-1"></i> <span data-translate="home">Home</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'wishlist' %}"><i class="fas fa-heart me-1"></i> <span data-translate="wishlist">Wishlist</span></a>
                    </li>
                </ul>

                <ul class="navbar-nav">

                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-user me-1"></i> {{ user.username }}
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{% url 'customer_dashboard' %}"><span data-translate="dashboard">Dashboard</span></a></li>
                                <li><a class="dropdown-item" href="{% url 'logout' %}"><span data-translate="logout">Logout</span></a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="btn btn-account" href="{% url 'login' %}"><span data-translate="login">Login</span></a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="product-container">
        <div class="product-header">
            <div class="product-image-section">
                <div class="product-image">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid">
                    {% else %}
                        <div class="placeholder-image d-flex align-items-center justify-content-center text-muted">
                            <i class="fas fa-image fa-3x"></i>
                        </div>
                    {% endif %}
                </div>

                {% if product.videos.count > 0 %}
                <div class="product-videos mt-4">
                    <h5 class="mb-3">Product Videos</h5>
                    <div class="row">
                        {% for video in product.videos.all %}
                            {% if video.is_active %}
                            <div class="col-md-6 mb-3">
                                <div class="video-thumbnail"
                                     style="cursor:pointer"
                                     onclick="playVideo('{{ video.video_file.url }}')">
                                    {% if video.thumbnail %}
                                        <img src="{{ video.thumbnail.url }}"
                                             class="img-fluid rounded"
                                             style="width:100%;height:150px;object-fit:cover;">
                                    {% else %}
                                        <div class="bg-dark text-white d-flex align-items-center justify-content-center rounded"
                                             style="height:150px;">
                                            <i class="fas fa-play-circle fa-2x me-2"></i> Play Video
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>

            <div class="product-info-section">
                <span class="product-category">{{ product.category.name }}</span>
                <h1 class="product-title">{{ product.name }}</h1>

                <div class="product-rating">
                    <div class="stars">
                        {% for i in "12345" %}
                            {% if forloop.counter <= product.rating|default:0 %}
                                <i class="fas fa-star"></i>
                            {% else %}
                                <i class="far fa-star"></i>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <span class="rating-text">({{ product.reviews.count }} reviews)</span>
                </div>

                <div class="product-price">
                    <span class="price-amount" data-price="{{ product.price }}" data-currency="INR">â‚¹{{ product.price }}</span>
                    {% if product.original_price and product.original_price != product.price %}
                        <span class="product-original-price" data-price="{{ product.original_price }}" data-currency="INR">â‚¹{{ product.original_price }}</span>
                    {% endif %}
                </div>

                <p class="product-description">{{ product.description }}</p>

                <div class="product-meta">
                    <div class="meta-item">
                        <i class="fas fa-box"></i>
                        <span>{% if product.stock > 0 %}<span data-translate="in_stock">In Stock</span>: {{ product.stock }}{% else %}<span data-translate="out_of_stock">Out of Stock</span>{% endif %}</span>
                    </div>
                    {% if product.size %}
                    <div class="meta-item">
                        <i class="fas fa-ruler-combined"></i>
                        <span>Size: {{ product.size }}</span>
                    </div>
                    {% endif %}
                    {% if product.color %}
                    <div class="meta-item">
                        <i class="fas fa-palette"></i>
                        <span>Color: {{ product.color }}</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Size Selection for Dress Items -->
                {% if "dress" in product.category.name.lower or "gown" in product.category.name.lower or "frock" in product.category.name.lower or "apparel" in product.category.name.lower or "clothing" in product.category.name.lower or "womenswear" in product.category.name.lower or "dresses" in product.category.name.lower or "shirts" in product.category.name.lower or "shirts" in product.name.lower or "shirt" in product.category.name.lower or "shirt" in product.name.lower or "t-shirt" in product.category.name.lower or "t-shirt" in product.name.lower or "tshirts" in product.category.name.lower or "tshirts" in product.name.lower or "tops" in product.category.name.lower or "tops" in product.name.lower or "dress" in product.name.lower or "gown" in product.name.lower or "frock" in product.name.lower %}
                <div class="size-selection-section mt-4">
                    <h5>Select Size:</h5>

                    <!-- Mobile Responsive Size Dropdown -->
                    <div class="d-md-none mb-3">
                        <select class="form-select form-select-lg" id="sizeSelectMobile">
                            <option value="">Choose a size...</option>
                            <option value="S">S</option>
                            <option value="M">M</option>
                            <option value="L">L</option>
                            <option value="XL">XL</option>
                            <option value="2XL">2XL</option>
                            <option value="3XL">3XL</option>
                        </select>
                    </div>

                    <!-- Desktop Size Buttons -->
                    <div class="d-none d-md-flex flex-wrap gap-2" id="sizeButtons">
                        <button type="button" class="btn btn-outline-primary size-btn" data-size="S">S</button>
                        <button type="button" class="btn btn-outline-primary size-btn" data-size="M">M</button>
                        <button type="button" class="btn btn-outline-primary size-btn" data-size="L">L</button>
                        <button type="button" class="btn btn-outline-primary size-btn" data-size="XL">XL</button>
                        <button type="button" class="btn btn-outline-primary size-btn" data-size="2XL">2XL</button>
                        <button type="button" class="btn btn-outline-primary size-btn" data-size="3XL">3XL</button>
                    </div>

                    <div class="mt-2">
                        <small class="text-muted">Select your size</small>
                    </div>
                </div>
                {% endif %}

                {% if product.influencer %}
                <div class="influencer-info">
                    <div class="influencer-avatar">
                        {{ product.influencer.first_name|first|upper }}{{ product.influencer.last_name|first|upper }}
                    </div>
                    <div class="influencer-details">
                        <h4>{{ product.influencer.get_full_name|default:product.influencer.username }}</h4>
                        <p><span data-translate="promoted_by">Promoted this product</span></p>
                    </div>
                </div>
                {% endif %}

                <div class="product-actions">
                    {% if user.is_authenticated %}
                        <a href="#" class="btn btn-primary" onclick="addToCartWithSize({{ product.id }}); return false;">
                            <i class="fas fa-shopping-cart me-2"></i><span data-translate="add_to_cart">Add to Cart</span>
                        </a>
                        <a href="#" class="btn btn-outline-primary" onclick="buyNowWithSize({{ product.id }}); return false;">
                            <i class="fas fa-bolt me-2"></i><span data-translate="buy_now">Buy Now</span>
                        </a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-primary" onclick="alert('Please log in to add items to your cart');">
                            <i class="fas fa-shopping-cart me-2"></i><span data-translate="add_to_cart">Add to Cart</span>
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-outline-primary" onclick="alert('Please log in to purchase this item');">
                            <i class="fas fa-bolt me-2"></i><span data-translate="buy_now">Buy Now</span>
                        </a>
                    {% endif %}
                </div>

                <a href="{% url 'add_review' product.id %}" class="btn btn-outline-primary w-100 mt-2">
                    <i class="fas fa-star me-2"></i><span data-translate="write_review">Write a Review</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Reviews Section -->
    <div class="reviews-section">
        <h2 class="section-title"><span data-translate="reviews">Customer Reviews</span></h2>

        {% if reviews %}
            {% for review in reviews %}
            <div class="review-item">
                <div class="review-header">
                    <div class="reviewer-info">
                        <span class="reviewer-name">{{ review.user.username }}</span>
                        <div class="stars">
                            {% for i in "12345" %}
                                {% if forloop.counter <= review.rating %}
                                    <i class="fas fa-star"></i>
                                {% else %}
                                    <i class="far fa-star"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <span class="review-date">{{ review.created_at|date:"M d, Y" }}</span>
                </div>
                <div class="review-content">
                    <p>{{ review.comment }}</p>
                </div>
                {% if review.image %}
                <div class="review-image">
                    <img src="{{ review.image.url }}" alt="Review Image" class="img-fluid rounded" style="max-width: 200px; max-height: 200px;">
                </div>
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <div class="no-reviews">
                <i class="fas fa-comment-slash fa-3x mb-3 text-muted"></i>
                <p><span data-translate="no_reviews_yet">No reviews yet. Be the first to review this product!</span></p>
            </div>
        {% endif %}
    </div>


            <div class="footer-bottom">
                <p>&copy; 2025 Lumoskart. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function playVideo(videoUrl) {
            // Create modal for video playback
            const modal = document.createElement('div');
            modal.className = 'modal fade show';
            modal.style.display = 'block';
            modal.style.backgroundColor = 'rgba(0,0,0,0.9)';
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.zIndex = '1050';

            const modalDialog = document.createElement('div');
            modalDialog.className = 'modal-dialog modal-xl';
            modalDialog.style.maxWidth = '90vw';
            modalDialog.style.margin = '2.5vh auto';

            const modalContent = document.createElement('div');
            modalContent.className = 'modal-content';
            modalContent.style.backgroundColor = 'transparent';
            modalContent.style.border = 'none';
            modalContent.style.boxShadow = 'none';

            const videoContainer = document.createElement('div');
            videoContainer.style.position = 'relative';

            const video = document.createElement('video');
            video.src = videoUrl;
            video.controls = true;
            video.autoplay = true;
            video.style.width = '100%';
            video.style.height = '80vh';
            video.style.objectFit = 'contain';

            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '&times;';
            closeBtn.className = 'btn btn-dark';
            closeBtn.style.position = 'absolute';
            closeBtn.style.top = '10px';
            closeBtn.style.right = '10px';
            closeBtn.style.zIndex = '1051';
            closeBtn.style.borderRadius = '50%';
            closeBtn.style.width = '50px';
            closeBtn.style.height = '50px';
            closeBtn.style.display = 'flex';
            closeBtn.style.alignItems = 'center';
            closeBtn.style.justifyContent = 'center';
            closeBtn.onclick = function() {
                document.body.removeChild(modal);
            };

            videoContainer.appendChild(video);
            videoContainer.appendChild(closeBtn);
            modalContent.appendChild(videoContainer);
            modalDialog.appendChild(modalContent);
            modal.appendChild(modalDialog);
            document.body.appendChild(modal);
        }

        // ===============================
        // ðŸŒ Language Selection Functionality
        // ===============================

        // Handle language selection
        const languageItems = document.querySelectorAll('.lang-option');
        languageItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const selectedLang = this.getAttribute('data-lang');

                // Store selected language in localStorage
                localStorage.setItem('preferredLanguage', selectedLang);

                // Update language selector display
                const langDisplay = document.getElementById('currentLanguage');
                if (langDisplay) {
                    const langNames = {
                        'en': 'English',
                        'ar': 'Arabic',
                        'hi': 'Hindi'
                    };
                    langDisplay.textContent = langNames[selectedLang] || 'English';
                }

                // Apply language changes
                applyLanguage(selectedLang);
            });
        });

        // Function to apply language translations
        function applyLanguage(langCode) {
            // Define translation objects
            const translations = {
                'en': {
                    'home': 'Home',
                    'wishlist': 'Wishlist',
                    'dashboard': 'Dashboard',
                    'logout': 'Logout',
                    'login': 'Login',
                    'add_to_cart': 'Add to Cart',
                    'buy_now': 'Buy Now',
                    'write_review': 'Write a Review',
                    'reviews': 'Reviews',
                    'in_stock': 'In Stock',
                    'out_of_stock': 'Out of Stock',
                    'promoted_by': 'Promoted this product',
                    'no_reviews_yet': 'No reviews yet. Be the first to review this product!'
                },
                'ar': {
                    'home': 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                    'wishlist': 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ§Øª',
                    'dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                    'logout': 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
                    'login': 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
                    'add_to_cart': 'Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©',
                    'buy_now': 'Ø§Ø´ØªØ± Ø§Ù„Ø¢Ù†',
                    'write_review': 'Ø§ÙƒØªØ¨ Ù…Ø±Ø§Ø¬Ø¹Ø©',
                    'reviews': 'Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª',
                    'in_stock': 'Ù…ØªÙˆÙØ±',
                    'out_of_stock': 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                    'promoted_by': 'ØªÙ… Ø§Ù„ØªØ±ÙˆÙŠØ¬ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬',
                    'no_reviews_yet': 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠØ±Ø§Ø¬Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬!'
                },
                'hi': {
                    'home': 'à¤¹à¥‹à¤®',
                    'wishlist': 'à¤‡à¤šà¥à¤›à¤¾ à¤¸à¥‚à¤šà¥€',
                    'dashboard': 'à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡',
                    'logout': 'à¤²à¥‰à¤— à¤†à¤‰à¤Ÿ',
                    'login': 'à¤²à¥‰à¤— à¤‡à¤¨',
                    'add_to_cart': 'à¤•à¤¾à¤°à¥à¤Ÿ à¤®à¥‡à¤‚ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚',
                    'buy_now': 'à¤…à¤­à¥€ à¤–à¤°à¥€à¤¦à¥‡à¤‚',
                    'write_review': 'à¤¸à¤®à¥€à¤•à¥à¤·à¤¾ à¤²à¤¿à¤–à¥‡à¤‚',
                    'reviews': 'à¤¸à¤®à¥€à¤•à¥à¤·à¤¾à¤à¤',
                    'in_stock': 'à¤¸à¥à¤Ÿà¥‰à¤• à¤®à¥‡à¤‚',
                    'out_of_stock': 'à¤¸à¥à¤Ÿà¥‰à¤• à¤®à¥‡à¤‚ à¤¨à¤¹à¥€à¤‚',
                    'promoted_by': 'à¤‡à¤¸ à¤‰à¤¤à¥à¤ªà¤¾à¤¦ à¤•à¥‹ à¤ªà¥à¤°à¤šà¤¾à¤°à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾',
                    'no_reviews_yet': 'à¤…à¤­à¥€ à¤¤à¤• à¤•à¥‹à¤ˆ à¤¸à¤®à¥€à¤•à¥à¤·à¤¾ à¤¨à¤¹à¥€à¤‚. à¤‡à¤¸ à¤‰à¤¤à¥à¤ªà¤¾à¤¦ à¤•à¥€ à¤¸à¤®à¥€à¤•à¥à¤·à¤¾ à¤•à¤°à¤¨à¥‡ à¤µà¤¾à¤²à¥‡ à¤ªà¤¹à¤²à¥‡ à¤µà¥à¤¯à¤•à¥à¤¤à¤¿ à¤¬à¤¨à¥‡à¤‚!'
                }
            };

            // Get translations for selected language
            const langTranslations = translations[langCode] || translations['en'];

            // Update text elements based on data attributes
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (langTranslations[key]) {
                    element.textContent = langTranslations[key];
                }
            });
        }

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Get language from localStorage or default to 'en'
            const savedLang = localStorage.getItem('preferredLanguage') || 'en';

            // Update language selector display
            const langDisplay = document.getElementById('currentLanguage');
            if (langDisplay) {
                const langNames = {
                    'en': 'English',
                    'ar': 'Arabic',
                    'hi': 'Hindi'
                };
                langDisplay.textContent = langNames[savedLang] || 'English';
            }

            // Apply language
            applyLanguage(savedLang);
        });

        // ===============================
        // ðŸ’° Currency Conversion Functionality
        // ===============================

        // Exchange rates (relative to INR)
        const exchangeRates = {
            'INR': 1,        // Indian Rupee
            'AED': 0.31,     // UAE Dirham
            'SGD': 0.017,    // Singapore Dollar
            'PHP': 0.69,     // Philippine Peso
            'USD': 0.012,    // US Dollar
            'EUR': 0.011,    // Euro
            'IDR': 183.33    // Indonesian Rupiah
        };

        // Function to convert prices
        function convertPrice(price, fromCurrency, toCurrency) {
            if (fromCurrency === toCurrency) return price;

            // Convert to INR first, then to target currency
            const inrValue = price / exchangeRates[fromCurrency];
            const convertedValue = inrValue * exchangeRates[toCurrency];
            return convertedValue;
        }

        // Function to format currency with symbol
        function formatCurrency(amount, currency) {
            const symbols = {
                'INR': 'â‚¹',
                'AED': 'Ø¯.Ø¥',
                'SGD': '$',
                'PHP': 'â‚±',
                'USD': '$',
                'EUR': 'â‚¬',
                'IDR': 'Rp'
            };

            // Format the amount based on currency
            let formattedAmount;
            if (['INR', 'USD', 'EUR', 'SGD'].includes(currency)) {
                formattedAmount = amount.toFixed(2);
            } else if (currency === 'PHP') {
                formattedAmount = amount.toFixed(2);
            } else if (currency === 'AED') {
                formattedAmount = amount.toFixed(2);
            } else if (currency === 'IDR') {
                formattedAmount = Math.round(amount).toString();
            } else {
                formattedAmount = amount.toFixed(2);
            }

            return symbols[currency] + formattedAmount;
        }

        // Function to update all prices on the page
        function updatePrices(targetCurrency) {
            const priceElements = document.querySelectorAll('.price-amount');
            priceElements.forEach(element => {
                const originalPrice = parseFloat(element.getAttribute('data-price'));
                const originalCurrency = element.getAttribute('data-currency');

                if (!isNaN(originalPrice) && originalCurrency) {
                    const convertedPrice = convertPrice(originalPrice, originalCurrency, targetCurrency);
                    const formattedPrice = formatCurrency(convertedPrice, targetCurrency);

                    element.textContent = formattedPrice;
                    element.setAttribute('data-price', convertedPrice);
                    element.setAttribute('data-currency', targetCurrency);
                }
            });
        }

        // Handle currency selection
        const currencyItems = document.querySelectorAll('.currency-option');
        currencyItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const selectedCurrency = this.getAttribute('data-currency');
                const currencySymbol = this.getAttribute('data-symbol');

                // Store selected currency in localStorage
                localStorage.setItem('preferredCurrency', selectedCurrency);

                // Update currency selector display
                const currencyDisplay = document.getElementById('currentCurrency');

                if (currencyDisplay) {
                    currencyDisplay.textContent = `${selectedCurrency} (${currencySymbol})`;
                }

                // Update all prices on the page
                updatePrices(selectedCurrency);
            });
        });

        // Initialize currency on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Get currency from localStorage or default to 'INR'
            const savedCurrency = localStorage.getItem('preferredCurrency') || 'INR';

            // Update currency selector display
            const currencyDisplay = document.getElementById('currentCurrency');

            if (currencyDisplay) {
                const symbols = {
                    'INR': 'â‚¹', 'AED': 'Ø¯.Ø¥', 'SGD': '$', 'PHP': 'â‚±',
                    'USD': '$', 'EUR': 'â‚¬', 'IDR': 'Rp'
                };
                const symbol = symbols[savedCurrency] || 'â‚¹';
                currencyDisplay.textContent = `${savedCurrency} (${symbol})`;
            }

            // Update all prices on the page
            updatePrices(savedCurrency);
        });

        // ===============================
        // ðŸ‘• Size Selection Functionality
        // ===============================

        // Handle size selection synchronization
        document.addEventListener('DOMContentLoaded', function() {
            const sizeButtons = document.querySelectorAll('.size-btn');
            const sizeSelectMobile = document.getElementById('sizeSelectMobile');

            // Sync mobile dropdown selection to desktop buttons
            if (sizeSelectMobile) {
                sizeSelectMobile.addEventListener('change', function() {
                    const selectedSize = this.value;

                    // Update desktop buttons to reflect selection
                    sizeButtons.forEach(button => {
                        if (button.getAttribute('data-size') === selectedSize) {
                            button.classList.add('active', 'btn-primary');
                            button.classList.remove('btn-outline-primary');
                        } else {
                            button.classList.remove('active', 'btn-primary');
                            button.classList.add('btn-outline-primary');
                        }
                    });
                });
            }

            // Sync desktop button selection to mobile dropdown
            sizeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const selectedSize = this.getAttribute('data-size');

                    // Update desktop buttons
                    sizeButtons.forEach(btn => {
                        if (btn === button) {
                            btn.classList.add('active', 'btn-primary');
                            btn.classList.remove('btn-outline-primary');
                        } else {
                            btn.classList.remove('active', 'btn-primary');
                            btn.classList.add('btn-outline-primary');
                        }
                    });

                    // Update mobile dropdown
                    if (sizeSelectMobile) {
                        sizeSelectMobile.value = selectedSize;
                    }
                });
            });
        });

        // Function to add to cart with selected size
        function addToCartWithSize(productId) {
            const selectedSize = getSelectedSize();

            // Check if this is a dress/gown/frock item and validate size selection
            const isDressItem = isDressItemCheck();
            if (isDressItem && !selectedSize) {
                alert('Please select a size before adding to cart.');
                return;
            }

            // Build URL with size parameter if size is selected
            let url = `/orders/add-to-cart/${productId}/`;
            if (selectedSize) {
                url += `?size=${selectedSize}`;
            }

            window.location.href = url;
        }

        // Function to buy now with selected size
        function buyNowWithSize(productId) {
            const selectedSize = getSelectedSize();

            // Check if this is a dress/gown/frock item and validate size selection
            const isDressItem = isDressItemCheck();
            if (isDressItem && !selectedSize) {
                alert('Please select a size before purchasing.');
                return;
            }

            // Build URL with size parameter if size is selected
            let url = `/orders/buy-now/${productId}/`;
            if (selectedSize) {
                url += `?size=${selectedSize}`;
            }

            window.location.href = url;
        }

        // Helper function to get selected size
        function getSelectedSize() {
            const sizeSelectMobile = document.getElementById('sizeSelectMobile');
            const activeButton = document.querySelector('#sizeButtons .size-btn.active');

            // Check mobile dropdown first
            if (sizeSelectMobile && sizeSelectMobile.value) {
                return sizeSelectMobile.value;
            }

            // Check desktop buttons
            if (activeButton) {
                return activeButton.getAttribute('data-size');
            }

            return null;
        }

        // Helper function to check if this is a dress/shirt item
        function isDressItemCheck() {
            const categoryName = '{{ product.category.name.lower }}';
            const productName = '{{ product.name.lower }}';

            return categoryName.includes('dress') ||
                   categoryName.includes('gown') ||
                   categoryName.includes('frock') ||
                   categoryName.includes('apparel') ||
                   categoryName.includes('clothing') ||
                   categoryName.includes('womenswear') ||
                   categoryName.includes('dresses') ||
                   categoryName.includes('shirts') ||
                   categoryName.includes('shirt') ||
                   categoryName.includes('t-shirt') ||
                   categoryName.includes('tshirts') ||
                   categoryName.includes('tops') ||
                   productName.includes('dress') ||
                   productName.includes('gown') ||
                   productName.includes('frock') ||
                   productName.includes('shirts') ||
                   productName.includes('shirt') ||
                   productName.includes('t-shirt') ||
                   productName.includes('tshirts') ||
                   productName.includes('top');
        }

    </script>
</body>
</html>
